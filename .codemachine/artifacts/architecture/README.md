# Scrum Poker Platform - System Architecture Blueprint

**Version:** 1.0
**Date:** 2025-10-17
**Generated By:** Claude Sonnet 4.5

---

## Overview

This directory contains a comprehensive System Architecture Blueprint for the Scrum Poker Platform, a lightweight real-time collaborative estimation tool for Agile teams. The blueprint follows the C4 Model methodology and provides detailed architectural guidance for development teams.

## Document Structure

The blueprint is organized into six thematically grouped documents for optimal readability and addressability:

### üìã [01_Context_and_Drivers.md](./01_Context_and_Drivers.md)
**Purpose:** Establishes the "Why" and "What" of the project

**Contents:**
- Project vision and key objectives
- System scope and boundaries
- Foundational assumptions
- Functional requirements summary (gameplay, accounts, billing, reporting, enterprise features)
- Non-functional requirements (performance, scalability, security, maintainability)
- Technology and organizational constraints

**Use this document to:** Understand business drivers, requirements context, and architectural constraints

---

### üèóÔ∏è [02_Architecture_Overview.md](./02_Architecture_Overview.md)
**Purpose:** Defines the high-level architectural approach and technology decisions

**Contents:**
- Architectural style rationale (Modular Monolith with Event-Driven Reactive Patterns)
- Comprehensive technology stack summary (Frontend: React, Backend: Quarkus, Database: PostgreSQL, Cache: Redis)
- Technology justifications and key library selections

**Use this document to:** Understand the chosen architectural style and technology selections

---

### üß± [03_System_Structure_and_Data.md](./03_System_Structure_and_Data.md)
**Purpose:** Details the static structure of the system

**Contents:**
- **C4 System Context Diagram** (Level 1): System boundary, users, external systems
- **C4 Container Diagram** (Level 2): Deployable units, data stores, communication pathways
- **C4 Component Diagram** (Level 3): Internal structure of Quarkus application
- **Entity Relationship Diagram (ERD)**: Database schema with 11 core entities
- Indexing strategy and partitioning approach

**Use this document to:** Understand system decomposition, component responsibilities, and data model

---

### üîÑ [04_Behavior_and_Communication.md](./04_Behavior_and_Communication.md)
**Purpose:** Describes the dynamic behavior and interaction patterns

**Contents:**
- API design rationale (RESTful JSON + WebSocket)
- Communication patterns (Synchronous REST, Asynchronous WebSocket, Job Processing)
- **Sequence Diagram:** Vote casting and round reveal workflow
- **Sequence Diagram:** OAuth2 authentication flow
- REST API endpoint overview
- WebSocket connection lifecycle and message types

**Use this document to:** Understand how components interact and message flows

---

### ‚öôÔ∏è [05_Operational_Architecture.md](./05_Operational_Architecture.md)
**Purpose:** Covers operational aspects and cross-cutting concerns

**Contents:**
- Authentication & Authorization (OAuth2, SSO, RBAC)
- Logging & Monitoring (structured logging, Prometheus metrics, Grafana dashboards)
- Security Considerations (transport security, input validation, GDPR compliance)
- Scalability & Performance (horizontal scaling, caching, optimization)
- Reliability & Availability (fault tolerance, high availability, disaster recovery)
- **Deployment Diagram:** AWS production environment architecture

**Use this document to:** Understand security, observability, scalability, and deployment strategies

---

### ü§î [06_Rationale_and_Future.md](./06_Rationale_and_Future.md)
**Purpose:** Explains architectural decisions, trade-offs, and future evolution

**Contents:**
- Key decisions summary (6 major decisions with rationale and trade-offs)
- Alternatives considered (microservices, GraphQL, MongoDB, Kafka, SSE)
- Known risks and mitigation strategies (6 identified risks)
- Future evolution paths (native mobile, AI estimation, integrations, white-label)
- Areas for deeper dive (security audit, performance testing, DR planning, API contracts)
- Glossary of technical terms

**Use this document to:** Understand why decisions were made, potential risks, and future roadmap

---

## Architecture Manifest

The **[architecture_manifest.json](./architecture_manifest.json)** file provides a machine-readable index of all sections within the blueprint. Each entry contains:

- `key`: Unique identifier for the section
- `file`: Filename containing the section
- `start_anchor`: HTML anchor marking the section start
- `description`: Brief summary of the section content

**Example usage:**
```json
{
  "key": "system-context-diagram",
  "file": "03_System_Structure_and_Data.md",
  "start_anchor": "<!-- anchor: system-context-diagram -->",
  "description": "C4 Level 1 diagram showing system boundary, users, and external systems"
}
```

This manifest enables downstream tools to perform surgical content retrieval and navigation.

---

## Diagrams

All architectural diagrams are embedded as **PlantUML** code blocks within the markdown files. The blueprint includes:

### Structural Diagrams
- **System Context Diagram** (C4 Level 1) - [03_System_Structure_and_Data.md](./03_System_Structure_and_Data.md#system-context-diagram)
- **Container Diagram** (C4 Level 2) - [03_System_Structure_and_Data.md](./03_System_Structure_and_Data.md#container-diagram)
- **Component Diagram** (C4 Level 3) - [03_System_Structure_and_Data.md](./03_System_Structure_and_Data.md#component-diagram)
- **Entity Relationship Diagram (ERD)** - [03_System_Structure_and_Data.md](./03_System_Structure_and_Data.md#data-model-overview-erd)

### Behavioral Diagrams
- **Vote Casting & Round Reveal Sequence Diagram** - [04_Behavior_and_Communication.md](./04_Behavior_and_Communication.md#key-interaction-flow-vote-round)
- **OAuth2 Authentication Flow Sequence Diagram** - [04_Behavior_and_Communication.md](./04_Behavior_and_Communication.md#key-interaction-flow-oauth-login)

### Deployment Diagrams
- **AWS Production Environment Deployment Diagram** - [05_Operational_Architecture.md](./05_Operational_Architecture.md#deployment-diagram)

**Rendering Diagrams:**
- Use the [PlantUML Online Server](http://www.plantuml.com/plantuml/uml/) for quick rendering
- Install the PlantUML extension in VS Code for inline preview
- Generate PNG/SVG exports via PlantUML CLI: `plantuml -tpng diagram.puml`

---

## Key Architectural Decisions

### 1. **Modular Monolith** (vs. Microservices)
- **Rationale:** Operational simplicity, transactional consistency, team velocity
- **Trade-off:** Cannot independently scale modules, but simpler to maintain and deploy
- **Future Path:** Extract Reporting Service if analytics impact real-time performance

### 2. **Quarkus Reactive Stack**
- **Rationale:** High WebSocket concurrency, non-blocking I/O, cloud-native optimization
- **Trade-off:** Steeper learning curve, but better resource efficiency

### 3. **PostgreSQL Primary Data Store**
- **Rationale:** ACID guarantees, JSONB flexibility, advanced features (partitioning, FTS)
- **Trade-off:** Horizontal scaling complexity, but read replicas sufficient for target scale

### 4. **Redis Pub/Sub for WebSocket Broadcasting**
- **Rationale:** Low latency, stateless app nodes, proven pattern
- **Trade-off:** No message persistence, but events persisted to PostgreSQL before broadcast

### 5. **Stripe for Billing**
- **Rationale:** Best-in-class API, compliance (PCI-DSS), subscription features
- **Trade-off:** Transaction fees and vendor lock-in, but mitigated by adapter pattern

### 6. **React for Frontend**
- **Rationale:** Ecosystem maturity, concurrent rendering, type safety
- **Trade-off:** Larger bundle size, but mitigated by code splitting

---

## Technology Stack Summary

| **Layer** | **Technology** | **Justification** |
|-----------|---------------|-------------------|
| **Frontend** | React 18 + TypeScript | Concurrent rendering for real-time updates, strong ecosystem |
| **Backend** | Quarkus 3.x (Reactive) | Non-blocking I/O for WebSocket concurrency, fast startup |
| **Database** | PostgreSQL 15+ | ACID compliance, JSONB flexibility, proven scalability |
| **Cache** | Redis 7+ (Cluster) | Session state, Pub/Sub for WebSocket broadcasting |
| **Auth** | OAuth2/OIDC + SAML2 | Google/Microsoft social login, Enterprise SSO |
| **Payments** | Stripe API | Subscription management, PCI compliance |
| **Container** | Docker + Kubernetes (EKS) | Cloud-native deployment, auto-scaling |
| **Observability** | Prometheus + Grafana + Loki | Metrics, dashboards, centralized logging |

---

## Target Metrics (NFRs)

- **Latency:** <200ms round-trip for WebSocket messages within region
- **Throughput:** 500 concurrent sessions (6,000 active connections)
- **API Response Time:** <500ms p95
- **Uptime:** 99.5% monthly availability
- **Scalability:** Horizontal auto-scaling (2-10 pods based on CPU/connections)

---

## Getting Started

### For Architects
1. Start with **01_Context_and_Drivers.md** to understand business requirements
2. Review **02_Architecture_Overview.md** for architectural style and technology decisions
3. Study **03_System_Structure_and_Data.md** for system decomposition and data model

### For Developers
1. Review **03_System_Structure_and_Data.md** for component structure and database schema
2. Study **04_Behavior_and_Communication.md** for API contracts and interaction flows
3. Reference **05_Operational_Architecture.md** for security, logging, and deployment guidelines

### For DevOps/SRE
1. Focus on **05_Operational_Architecture.md** for deployment, monitoring, and reliability strategies
2. Review **06_Rationale_and_Future.md** for known risks and mitigation strategies
3. Study deployment diagram for AWS infrastructure architecture

### For Product/Project Managers
1. Start with **01_Context_and_Drivers.md** for project vision and scope
2. Review **06_Rationale_and_Future.md** for future evolution paths and roadmap considerations
3. Reference **02_Architecture_Overview.md** for high-level technology understanding

---

## Document Conventions

- **Anchors:** Each major section has an HTML comment anchor (e.g., `<!-- anchor: key-name -->`) for machine-readable navigation
- **Diagrams:** PlantUML syntax enclosed in ` ~~~plantuml ... ~~~ ` code blocks
- **Cross-References:** Sections reference related content by file and anchor
- **Glossary:** Technical terms defined in [06_Rationale_and_Future.md](./06_Rationale_and_Future.md#glossary)

---

## Maintenance & Updates

**Version History:**
- **v1.0** (2025-10-17): Initial blueprint generation based on product specification

**Update Process:**
1. Modify relevant `.md` file(s) with architectural changes
2. Update `architecture_manifest.json` if new sections added or anchor keys changed
3. Increment version number in all documents
4. Document rationale for significant changes in **06_Rationale_and_Future.md**

**Review Cadence:**
- **Quarterly:** Review NFRs, update capacity planning based on actual metrics
- **Bi-annually:** Revisit architectural decisions, evaluate alternatives as ecosystem evolves
- **Major Release:** Update diagrams, sequence flows, and deployment architecture

---

## Contact & Feedback

For questions or clarifications about this architecture blueprint, please consult:
- **Product Specification:** Reference document defining features and requirements
- **Technical Lead:** For interpretation of architectural decisions
- **DevOps Team:** For deployment and infrastructure questions

---

## License & Usage

This architecture blueprint is proprietary and confidential. Unauthorized distribution or reproduction is prohibited.

**¬© 2025 Scrum Poker Platform | All Rights Reserved**
