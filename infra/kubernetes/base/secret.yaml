# ==========================================
# ⚠️  CRITICAL SECURITY WARNING
# ==========================================
# This is a TEMPLATE file with placeholder values for documentation purposes.
# DO NOT use these placeholder values in any environment, including development.
#
# In production, use one of these secure approaches to inject real secrets:
# 1. External Secrets Operator (https://external-secrets.io/)
#    - Syncs secrets from AWS Secrets Manager, HashiCorp Vault, etc.
# 2. AWS Secrets Manager CSI Driver
#    - Mounts secrets directly from AWS Secrets Manager as volumes
# 3. Sealed Secrets (https://github.com/bitnami-labs/sealed-secrets)
#    - Encrypts secrets that can be safely stored in Git
# 4. CI/CD Pipeline Secret Injection
#    - Inject secrets at deployment time from secure CI/CD secret storage
#
# NEVER commit real secrets to version control!
# This file should be treated as documentation only.
# ==========================================

apiVersion: v1
kind: Secret
metadata:
  name: scrum-poker-secrets
  labels:
    app: scrum-poker-backend
    app.kubernetes.io/name: scrum-poker-backend
    app.kubernetes.io/component: backend
    app.kubernetes.io/part-of: scrum-poker-platform
type: Opaque
stringData:
  # ==========================================
  # Database Credentials
  # ==========================================
  DB_USERNAME: "REPLACE_WITH_ACTUAL_DATABASE_USERNAME"
  DB_PASSWORD: "REPLACE_WITH_ACTUAL_DATABASE_PASSWORD"

  # ==========================================
  # JWT Private Key
  # ==========================================
  # For JWT token signing - MUST be the actual PEM file content
  # Generate with: openssl genrsa -out privateKey.pem 2048
  # In production, load from secure key management service
  JWT_PRIVATE_KEY_LOCATION: |
    -----BEGIN RSA PRIVATE KEY-----
    REPLACE_THIS_WITH_ACTUAL_PRIVATE_KEY_CONTENT
    DO_NOT_USE_PLACEHOLDER_VALUES
    GENERATE_WITH_OPENSSL_GENRSA
    -----END RSA PRIVATE KEY-----

  # ==========================================
  # OAuth2 Client Secrets
  # ==========================================
  # Google OAuth2 credentials from Google Cloud Console
  GOOGLE_CLIENT_ID: "REPLACE_WITH_GOOGLE_CLIENT_ID"
  GOOGLE_CLIENT_SECRET: "REPLACE_WITH_GOOGLE_CLIENT_SECRET"

  # Microsoft OAuth2 credentials from Azure Portal
  MICROSOFT_CLIENT_ID: "REPLACE_WITH_MICROSOFT_CLIENT_ID"
  MICROSOFT_CLIENT_SECRET: "REPLACE_WITH_MICROSOFT_CLIENT_SECRET"

  # ==========================================
  # Stripe API Credentials
  # ==========================================
  # Stripe secret key (sk_test_... for test mode, sk_live_... for production)
  STRIPE_API_KEY: "REPLACE_WITH_STRIPE_SECRET_KEY"

  # Stripe webhook signing secret (whsec_...) from Stripe Dashboard
  STRIPE_WEBHOOK_SECRET: "REPLACE_WITH_STRIPE_WEBHOOK_SECRET"

  # ==========================================
  # AWS S3 Credentials
  # ==========================================
  # AWS IAM credentials with S3 access for export file storage
  AWS_ACCESS_KEY_ID: "REPLACE_WITH_AWS_ACCESS_KEY_ID"
  AWS_SECRET_ACCESS_KEY: "REPLACE_WITH_AWS_SECRET_ACCESS_KEY"

# ==========================================
# Example: Using External Secrets Operator
# ==========================================
# apiVersion: external-secrets.io/v1beta1
# kind: ExternalSecret
# metadata:
#   name: scrum-poker-secrets
#   namespace: production
# spec:
#   refreshInterval: 1h
#   secretStoreRef:
#     name: aws-secrets-manager
#     kind: SecretStore
#   target:
#     name: scrum-poker-secrets
#     creationPolicy: Owner
#   data:
#   - secretKey: DB_PASSWORD
#     remoteRef:
#       key: production/scrumpoker/db-password
#   - secretKey: STRIPE_API_KEY
#     remoteRef:
#       key: production/scrumpoker/stripe-api-key
#   # ... (add all other secrets)

# ==========================================
# Example: Using AWS Secrets Manager CSI Driver
# ==========================================
# In deployment.yaml, add volume and volumeMount:
# volumes:
# - name: secrets
#   csi:
#     driver: secrets-store.csi.k8s.io
#     readOnly: true
#     volumeAttributes:
#       secretProviderClass: "scrum-poker-secrets"
#
# volumeMounts:
# - name: secrets
#   mountPath: "/mnt/secrets"
#   readOnly: true
#
# Then read secrets from files in /mnt/secrets/
